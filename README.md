###  Chat API Backend

–ü—Ä–æ—Å—Ç–æ–π REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —á–∞—Ç–∞–º–∏ –∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏. –°–µ—Ä–≤–∏—Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞–Ω–∏—è —á–∞—Ç–æ–≤, –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –∏—Ö –ø–æ–ª—É—á–µ–Ω–∏—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ª–∏–º–∏—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

<!-- –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
    1. Docker (–¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤)
    2. Make (–¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Makefile)
    3. Goose (–¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π) -->
**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
1. [Docker](https://www.docker.com/) (–¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤)
2. [Make](https://www.gnu.org/software/make/) (–¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Makefile)
3. [Goose](https://pressly.github.io/goose/) (–¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π)

**–ö–æ–º–∞–Ω–¥—ã:**
```bash
make docker-up      # –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
make migrate-up     # –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–∏—Ö –∫–æ–º–∞–Ω–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:8180
–î—Ä—É–≥–∏–µ –∫–æ–º–∞–Ω–¥—ã –¥–æ—Å—Ç—É–ø–Ω—ã –≤ Makefile –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞.

## üìÇ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑–±–∏—Ç –ø–æ —Å–ª–æ—è–º, –∫–∞–∫ –≤ –Ω–∞—Å—Ç–æ—è—â–∏—Ö –ø—Ä–æ–¥-–ø—Ä–æ–µ–∫—Ç–∞—Ö:

```
chat/
‚îú‚îÄ‚îÄ cmd/
‚îÇ   ‚îî‚îÄ‚îÄ app/
‚îÇ       ‚îî‚îÄ‚îÄ main.go               # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ configs/
‚îÇ   ‚îî‚îÄ‚îÄ main.yml                  # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îú‚îÄ‚îÄ business/                 # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ config/                   # –ü–∞—Ä—Å–∏–Ω–≥ –∫–æ–Ω—Ñ–∏–≥–∞
‚îÇ   ‚îú‚îÄ‚îÄ delivery/http/            # HTTP-—Ö–µ–Ω–¥–ª–µ—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ domain/                   # –ú–æ–¥–µ–ª–∏ –∏ DTO
‚îÇ   ‚îú‚îÄ‚îÄ repository/postgres/      # –†–∞–±–æ—Ç–∞ —Å PostgreSQL
‚îÇ   ‚îî‚îÄ‚îÄ server/                   # HTTP-—Å–µ—Ä–≤–µ—Ä
‚îú‚îÄ‚îÄ migrations/goose/             # SQL-–º–∏–≥—Ä–∞—Ü–∏–∏
‚îî‚îÄ‚îÄ pkg/                          # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞–∫–µ—Ç—ã
```

---

### üîß –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:

| –ú–µ—Ç–æ–¥    | –ü—É—Ç—å                     | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç                                                                          |
| -------- | ------------------------ | ------------------------------------------------------------------------------------|
| `POST`   | `/chats`                 | –°–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π —á–∞—Ç. Body: `{"title": "string"}` –¥–ª–∏–Ω–∞ -(–º–∏–Ω 1, –º–∞–∫—Å 200)             |
| `POST`   | `/chats/{id}/messages`   | –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç. Body: `{"text": "string"}` –¥–ª–∏–Ω–∞ -(–º–∏–Ω 1, –º–∞–∫—Å 5000)    |
| `GET`    | `/chats/{id}`            | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —á–∞—Ç —Å –ø–æ—Å–ª–µ–¥–Ω–∏–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏. Query: `limit` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 20, –º–∞–∫—Å 100) |
| `DELETE` | `/chats/{id}`            | –£–¥–∞–ª—è–µ—Ç —á–∞—Ç –≤–º–µ—Å—Ç–µ —Å–æ –≤—Å–µ–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏                                             |

---

## üß™ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –ø—Ä–∏–º–µ–Ω—è–µ–º—ã–µ –≤ –ø—Ä–æ–µ–∫—Ç–µ:

‚úÖ –†–∞–±–æ—Ç–∞ `RESTAPI` –Ω–∞ `net/http`
‚úÖ –ü–∞—Ä—Å–∏–Ω–≥, —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è JSON-–∑–∞–ø—Ä–æ—Å–æ–≤
‚úÖ –†–∞–±–æ—Ç–∞ —Å `Postgres` —á–µ—Ä–µ–∑ `gorm`
‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ `goose`
‚úÖ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ `Docker`, `Dockerfile`, `docker-compose`
‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ `log/slog`
‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ `testify`
‚úÖ –ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: handlers ‚Üí business ‚Üí repository

---

## –í–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏ –ø–æ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º

| –≠–Ω–¥–ø–æ–∏–Ω—Ç                      | –ö–æ–¥ | –ü—Ä–∏—á–∏–Ω—ã                                                                             |
|-------------------------------|-----|-------------------------------------------------------------------------------------|
| **POST /chats**               | 400 |–ù–µ–≤–∞–ª–∏–¥–Ω—ã–π JSON<br>`title` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç<br>`title` < 1 –∏–ª–∏ > 200 —Å–∏–º–≤                 |
|                               | 500 |–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —á–∞—Ç–∞                                          |
|                               | 504 |–¢–∞–π–º–∞—É—Ç –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö                                                  |
| **POST /chats/{id}/messages** | 400 |–ù–µ–≤–∞–ª–∏–¥–Ω—ã–π JSON<br>`text` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç<br>`text`<1 –∏–ª–∏ >5000 —Å–∏–º–≤<br>–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π `id`|
|                               | 404 |–ß–∞—Ç —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º `id` –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç                                                   |
|                               | 500 |–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏—è                                     |
|                               | 504 |–¢–∞–π–º–∞—É—Ç –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö                                                  |
| **GET /chats/{id}**           | 400 |–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç `id` –≤ URL                                                       |
|                               | 404 |–ß–∞—Ç —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º `id` –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç                                                   |
|                               | 500 |–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö                                       |
|                               | 504 |–¢–∞–π–º–∞—É—Ç –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–æ–æ–±—â–µ–Ω–∏–π                                                       |
| **DELETE /chats/{id}**        | 400 |–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç `id` –≤ URL                                                       |
|                               | 500 |–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏                                               |
|                               | 504 |–¢–∞–π–º–∞—É—Ç –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö                                                          |

---

## üéØ –ò—Ç–æ–≥–∏

**–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** –í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç, —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–æ–±–ª—é–¥–µ–Ω–∞.
